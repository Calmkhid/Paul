(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3389],{3273:function(e,t,n){Promise.resolve().then(n.bind(n,3793))},6463:function(e,t,n){"use strict";var r=n(1169);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},6447:function(e,t,n){"use strict";n.d(t,{$4:function(){return s},GG:function(){return o},PR:function(){return u},_R:function(){return c},_V:function(){return l},eR:function(){return i},hi:function(){return a}});var r=n(8472);let a=r.Z.create({baseURL:"https://api.harrisongrooks.com/public/api",withCredentials:!0}),o="https://api.harrisongrooks.com/public/api/auth/google",s=e=>{if(e)return"x-s24-li-".concat(e,"-zY2$#7te")},i=e=>{if(e)return e.replace("x-s24-li-","").replace("-zY2$#7te","")},l=async()=>{try{await r.Z.get("http:/https://api.harrisongrooks.com/public/api/sanctum/csrf-cookie",{withCredentials:!0}),console.log("CSRF token fetched successfully")}catch(e){console.error("Failed to fetch CSRF token:",e)}};a.interceptors.request.use(async e=>{let t=document.cookie.split("; ").find(e=>e.startsWith("XSRF-TOKEN="));t&&(e.headers["X-XSRF-TOKEN"]=decodeURIComponent(t.split("=")[1]));let n=localStorage.getItem("auth_token");if(n){let t=i(n);e.headers.Authorization="Bearer ".concat(t)}else console.error("Authorization token not found in local storage");return e},e=>Promise.reject(e));let u=async()=>{let e=localStorage.getItem("auth_token");if(!e)throw Error("No token available");let t=i(e);try{return(await a.get("/user",{headers:{Authorization:"Bearer ".concat(t)}})).data}catch(e){throw e}},c=async e=>{if(!e)throw Error("No token provided");try{return(await a.get("/user",{headers:{Authorization:"Bearer ".concat(e)}})).data}catch(e){throw e}}},3793:function(e,t,n){"use strict";n.r(t);var r=n(7437),a=n(2265),o=n(2207),s=n(4377),i=n.n(s),l=n(6648),u=n(2292),c=n(7138),d=n(6447),h=n(324),f=n(6463);t.default=()=>{let[e,t]=(0,a.useState)({email:"",password:""}),[n,s]=(0,a.useState)({}),[m,p]=(0,a.useState)(!0),[_,g]=(0,a.useState)(!1),{dispatch:y}=(0,a.useContext)(h.V),v=(0,f.useRouter)();(0,a.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("token")||localStorage.getItem("auth_token");e?x((0,d.eR)(e)):p(!1)},[]);let x=async e=>{try{let t=await d.hi.get("/user",{headers:{Authorization:"Bearer ".concat(e)}});y({type:"LOGIN_SUCCESS",payload:{user:t.data,access_token:e}}),localStorage.setItem("auth_token",(0,d.$4)(e)),t.data.role,v.push("/predictions")}catch(e){console.error("Invalid token:",e.response?e.response.data:e.message),p(!1)}},b=n=>{t({...e,[n.target.name]:n.target.value})},w=async n=>{n.preventDefault(),g(!0),s({});try{await (0,d._V)();let{access_token:n}=(await d.hi.post("/login",e)).data;localStorage.setItem("auth_token",(0,d.$4)(n));let r=await d.hi.get("/user",{headers:{Authorization:"Bearer ".concat((0,d.eR)(n))}});y({type:"LOGIN_SUCCESS",payload:{user:r.data,access_token:n}}),t({email:"",password:""}),r.data.role,v.push("/predictions")}catch(e){e.response&&e.response.data?s({error:e.response.data.message||"Invalid login details"}):console.error("Failed to login:",e.response?e.response.data:e.message)}finally{g(!1)}};return m||_?(0,r.jsx)("p",{children:"Loading..."}):(0,r.jsx)("main",{className:i().signIn,children:(0,r.jsxs)("div",{className:i().signInContent,children:[(0,r.jsx)("div",{className:i().formContainer,children:(0,r.jsxs)("div",{className:i().formContent,children:[(0,r.jsx)("div",{className:i().heading,children:(0,r.jsx)("h3",{children:"Sign in"})}),(0,r.jsx)("div",{className:i().googleSignIn,children:(0,r.jsxs)(o.z,{onClick:()=>{window.location.href=d.GG},children:[(0,r.jsx)(l.default,{src:u.Z,alt:"Google logo"}),"Sign in with Google",(0,r.jsx)(l.default,{src:u.Z,alt:"Google logo"})]})}),(0,r.jsxs)("form",{onSubmit:w,children:[(0,r.jsxs)("div",{className:i().orContainer,children:[(0,r.jsx)("div",{}),(0,r.jsx)("span",{children:"OR"}),(0,r.jsx)("div",{})]}),(0,r.jsxs)("div",{className:i().inputContainer,children:[(0,r.jsx)("label",{htmlFor:"email",children:"Email"}),(0,r.jsx)("input",{type:"email",id:"email",name:"email",placeholder:"youremail@do.main",value:e.email,onChange:b,required:!0})]}),(0,r.jsxs)("div",{className:i().inputContainer,children:[(0,r.jsx)("label",{htmlFor:"password",children:"Password"}),(0,r.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"Enter your password",value:e.password,onChange:b,required:!0})]}),(0,r.jsx)("div",{className:i().externalLink,children:(0,r.jsx)(c.default,{href:"/forgot-password",children:(0,r.jsx)("span",{children:"Forgot password?"})})}),(0,r.jsx)("div",{className:i().submitButton,children:(0,r.jsx)(o.z,{type:"submit",disabled:_,children:_?"Signing in...":"Sign in"})}),(0,r.jsxs)("div",{className:i().externalLink,children:[(0,r.jsx)("span",{children:"Don't have an account?\xa0"}),(0,r.jsx)(c.default,{href:"/sign-up",children:(0,r.jsx)("span",{children:"Create account"})})]})]}),n.error&&(0,r.jsx)("div",{className:i().errorContainer,children:n.error})]})}),(0,r.jsx)("div",{className:i().board,children:(0,r.jsx)("div",{className:i().boardContent,children:(0,r.jsxs)("div",{className:i().text,children:[(0,r.jsx)("h4",{children:"Company"}),(0,r.jsx)("p",{children:"HarrisonGrooks Games"})]})})})]})})}},2207:function(e,t,n){"use strict";n.d(t,{d:function(){return l},z:function(){return u}});var r=n(7437),a=n(2265),o=n(9617),s=n.n(o),i=n(1960);let l=(0,n(2218).j)(s().button,{variants:{variant:{primary:s().primaryButton,secondary:s().secondaryButton},size:{default:s().defaultSize,sm:s().smallButton,icon:s().iconButton}},defaultVariants:{variant:"primary",size:"default"}}),u=(0,a.forwardRef)((e,t)=>{let{className:n,variant:a,size:o,...s}=e;return(0,r.jsx)("button",{className:(0,i.cn)(l({variant:a,size:o,className:n})),ref:t,...s})});u.displayName="Button"},324:function(e,t,n){"use strict";n.d(t,{V:function(){return i},H:function(){return u}});var r=n(7437),a=n(2265),o=(e,t)=>{switch(t.type){case"LOGIN_SUCCESS":return{...e,isAuthenticated:!0,token:t.payload};case"LOGOUT":return{...e,isAuthenticated:!1,token:null};default:return e}},s=n(6447);let i=(0,a.createContext)(),l={isAuthenticated:!1,user:null,token:null},u=e=>{let{children:t}=e,[n,u]=(0,a.useReducer)(o,l);return(0,a.useEffect)(()=>{(async()=>{let e=localStorage.getItem("auth_token");if(e)try{let t=await (0,s.PR)();u({type:"LOGIN_SUCCESS",payload:{user:t,token:e}})}catch(e){localStorage.removeItem("auth_token")}})()},[]),(0,r.jsx)(i.Provider,{value:{state:n,dispatch:u},children:t})}},1960:function(e,t,n){"use strict";let r;n.d(t,{Bt:function(){return l},Pn:function(){return u},VI:function(){return c},aA:function(){return d},cn:function(){return s},td:function(){return i}});var a=n(4839),o=n(6447);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.Z)(t)}function i(e){let t=Number(e),n=(t/15).toFixed(2),r=(107*t).toFixed(2);return{ghc:t.toFixed(2),usd:n,ngn:r}}function l(e){let t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",weekday:"long"}).format(t)}function u(e){let t=new Date(e);return new Intl.DateTimeFormat("en-UK",{year:"numeric",month:"numeric",day:"numeric"}).format(t)}r=n(7209).Z;let c=e=>e.reduce((e,t)=>e*parseFloat(t.odds),1).toFixed(2),d=(e,t,n,a,o,s)=>{r&&r.setup({key:"gh"===e?"pk_live_2dbcd346c874d113fe830c654003ddcc953b21bd":"pk_live_dc85fed87affdebb8ea917d1487ad0f69d5b7c6e",email:t,amount:"gh"===e?100*n:10727*n,currency:"gh"===e?"GHS":"NGN",metadata:{custom_fields:[{display_name:"Group ID",variable_name:"group_id",value:a},{display_name:"Group Type",variable_name:"group_type",value:o},{display_name:"Country",variable_name:"country",value:e}]},callback:function(t){h(t.reference,e,s)},onClose:function(){alert("Payment window closed")},channels:["card","bank","ussd","qr","mobile_money","bank_transfer"]}).openIframe()},h=async(e,t,n)=>{try{let r=await o.hi.post("/verify-payment",{reference:e,country:t});"success"===r.data.status?n&&n(r.data.games):alert("Payment verification failed")}catch(e){alert("Payment verification error")}}},4377:function(e){e.exports={signIn:"auth-styles_signIn__OoRcd",signInContent:"auth-styles_signInContent__MIXuN",formContainer:"auth-styles_formContainer__4lXFd",formContent:"auth-styles_formContent__ABkVG",heading:"auth-styles_heading__Wnfp_",googleSignIn:"auth-styles_googleSignIn__MOm_m",orContainer:"auth-styles_orContainer__hbc6I",inputContainer:"auth-styles_inputContainer__GsT2E",externalLink:"auth-styles_externalLink__fNmzg",submitButton:"auth-styles_submitButton__Q14Ef",board:"auth-styles_board__AKLM6",boardContent:"auth-styles_boardContent__WIHBf",errorContainer:"auth-styles_errorContainer__z9HIE",error:"auth-styles_error__NUfZy",messageContainer:"auth-styles_messageContainer__q9wcV",passwordWrapper:"auth-styles_passwordWrapper__FbDQ7",togglePasswordIcon:"auth-styles_togglePasswordIcon__TYvZU"}},9617:function(e){e.exports={button:"button_button__iUKg0",primaryButton:"button_primaryButton__xzZPO",secondaryButton:"button_secondaryButton__MqyUo",defaultSize:"button_defaultSize__kwclv",smallButton:"button_smallButton__3IKvJ",iconButton:"button_iconButton__HVk8t"}},2292:function(e,t){"use strict";t.Z={src:"/_next/static/media/google_logo.dd910591.png",height:512,width:500,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA8UlEQVR42mMAgdd+xsqvnEz3vXI2+f/K2RSEr79yNnNjAIEnDHaqr6xMP7x2MfkPVDTvpYvt9Fcu1l9fuDqlMIDA1/lyB98mGv5/wWhpxIAN/NrH9P/3Lt61DEBwuGcpj3fzxy22rV/Ou7Z8PujU8nkrw/89DP+/7RZZzwAEcxeu4HZs/bTNufXzUafWz58dW778Zzi31Whf7irf/wxLwy1gpoYy/Gd1avrxzrH181UGhnlJiuLLQ96YrQj6b7w8bLnxCs/Zpksqftr13/jvXPffjgEEAlcGyBstD95mAlRksjz0v/FKp0sGaxlsGBgYGADi/mpSNEy88gAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}},2218:function(e,t,n){"use strict";n.d(t,{j:function(){return o}});let r=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,a=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=function e(t){var n,r,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t))for(n=0;n<t.length;n++)t[n]&&(r=e(t[n]))&&(a&&(a+=" "),a+=r);else for(n in t)t[n]&&(a&&(a+=" "),a+=n)}return a}(e))&&(r&&(r+=" "),r+=t);return r},o=(e,t)=>n=>{var o;if((null==t?void 0:t.variants)==null)return a(e,null==n?void 0:n.class,null==n?void 0:n.className);let{variants:s,defaultVariants:i}=t,l=Object.keys(s).map(e=>{let t=null==n?void 0:n[e],a=null==i?void 0:i[e];if(null===t)return null;let o=r(t)||r(a);return s[e][o]}),u=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{});return a(e,l,null==t?void 0:null===(o=t.compoundVariants)||void 0===o?void 0:o.reduce((e,t)=>{let{class:n,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...i,...u}[t]):({...i,...u})[t]===n})?[...e,n,r]:e},[]),null==n?void 0:n.class,null==n?void 0:n.className)}}},function(e){e.O(0,[5773,3721,8472,8726,2971,7023,1744],function(){return e(e.s=3273)}),_N_E=e.O()}]);